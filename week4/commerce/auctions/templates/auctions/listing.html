{% extends "auctions/layout.html" %}

{% block body %}
    <!-- this error will prompt to the user when user added redundant listing -->
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}

    {% if listing %}
        {% if watchlist_exist and user.is_authenticated %}
            <div><strong>watchlisted</strong></div>
        {% endif %}
        <h2>Listing: {{ listing.title }}</h2>
        <figure>
            <img src={{ listing.img_url }} alt={{ listing.title }} width="300" height="300">
            <figcaption>{{ listing.title }}</figcaption>
            <figcaption>RM{{ listing.starting_price }}</figcaption>
            <div>{{ listing.description }}</div>
        </figure>

        <h3>Details</h3>
        <ul>
            <li>Listed by: {{ listing.creator.username }}</li>
            {% if category %}
                <li>Category: {{ category.name }}</li>
            {% else %}
                <li> No Category. </li>
            {% endif %}
        </ul>

        {% if user.is_authenticated %}
            <div>
                <form action="{% url 'add_watchlist' listing.id %}" method="post">
                    {% csrf_token %}
                    <input type="submit" name="watchlist-btn" value="Add to watchlist">
                </form>
            </div>
        {% endif %}
    {% else %}  
        <h2>{{ message }}</h2>
    {% endif %}
{% endblock %}  